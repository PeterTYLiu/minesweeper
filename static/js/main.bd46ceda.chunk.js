(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{14:function(e,n,t){},16:function(e,n,t){},17:function(e,n,t){"use strict";t.r(n);var i=t(1),c=t.n(i),r=t(8),o=t.n(r),a=(t(14),t(4)),s=t(2),l=t(7),u=t(9),d=t(0);function f(e){var n=e.isMine,t=e.minesAround,i=e.swept,c=e.setTilesRemaining,r=e.tilesRemaining,o=e.floodFill,s=e.boardState,f=e.setBoardState,g=e.id,j=e.flagStatus,b=e.loseGame,h=e.gameStatus,m=e.flaggingMode,p=function(){if(!i){var e=Object(a.a)(s);e[g-1].flagStatus="flagged"===j?"unflagged":"flagged",f(e)}},v=Object(u.useSwipeable)({onSwiped:function(){return p()}}),O=Object(d.jsxs)(d.Fragment,{children:[(!i&&"inGame"===h||i&&n)&&"flagged"===j?Object(d.jsx)("p",{style:{fontWeight:"normal"},className:j,children:"\ud83d\udea9"}):null,"inGame"===h||n||"flagged"!==j?null:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{style:{fontWeight:"normal"},className:j,children:"\ud83d\udea9"}),Object(d.jsx)("span",{style:{position:"absolute",color:"white",fontSize:"2.2rem",paddingBottom:"2px"},children:"\ud83d\udec7"})]}),i||"maybe"!==j?null:Object(d.jsx)("p",{children:"\u2754"}),"inGame"===h?!n&&t&&i?Object(d.jsx)("p",{children:t}):null:n?"flagged"!==j?"wonGame"===h?Object(d.jsx)("p",{children:"\ud83c\udf3c"}):Object(d.jsx)("p",{children:"\ud83d\udca3"}):"wonGame"===h?Object(d.jsx)("p",{children:"\ud83c\udf3c"}):Object(d.jsx)("p",{children:"\ud83d\udea9"}):t&&i?Object(d.jsx)("p",{children:t}):null]});return Object(d.jsx)("div",Object(l.a)(Object(l.a)({},v),{},{className:"tile id-".concat(g," ").concat(n?"mine":""," ").concat(i?"swept":""," around-").concat(t),onContextMenu:function(e){e.preventDefault(),"withoutMaybe"===m&&p()},onClick:function(){if("unflagged"===j&&n&&"inGame"===h)return b(g);if("unflagged"===j&&!i&&"inGame"===h){var e=Object(a.a)(s);e[g-1].swept=!0,c(r-1),0!==t||n||(o(e[g-1],e),c(e.filter((function(e){return!e.swept&&!e.isMine})).length)),f(e)}},children:O}))}function g(e){var n=e.gameStatus,t=e.currentFormat,c=e.setMessage,r=Object(i.useState)(0),o=Object(s.a)(r,2),a=o[0],l=o[1];return Object(i.useEffect)((function(){if("inGame"===n){var e=setInterval((function(){l(Number((a+.1).toFixed(1)))}),100);return function(){return clearInterval(e)}}}),[n,a]),Object(i.useEffect)((function(){if(console.log("The game status is ".concat(n)),"wonGame"===n){var e=localStorage.getItem(t);(!e||a<Number(e))&&(localStorage.setItem(t,a.toString()),c("\ud83c\udf89 New record!"),console.log("New record: ".concat(a,"s")))}"preGame"===n&&l(0)}),[n]),Object(d.jsxs)(d.Fragment,{children:[a.toString().includes(".")?a:a.toString()+".0","s"]})}function j(e){var n=e.flaggingMode,t=e.setFlaggingMode,i=e.setSettingsPanelVisible;return Object(d.jsx)("div",{style:{position:"absolute",height:"100vh",width:"100vw",backgroundColor:"#00000088",display:"grid",placeItems:"center"},children:Object(d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"24px",background:"white",maxWidth:"350px",width:"90%",borderRadius:"4px",padding:"24px"},className:"settings-panel",children:[Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"checkbox",checked:"off"!==n,onChange:function(){var e="off"===n?"withoutMaybe":"off";t(e),localStorage.setItem("flaggingMode",e)}}),Object(d.jsx)("h3",{children:"Flagging"})]}),Object(d.jsx)("hr",{}),Object(d.jsxs)("div",{children:[Object(d.jsx)("h4",{children:"New in version 1.3:"}),Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:"Toggle flaggability"}),Object(d.jsx)("li",{children:"\ud83d\udc1b fixes"})]}),Object(d.jsx)("br",{}),Object(d.jsx)("h4",{children:"Coming soon:"}),Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:"Chording"}),Object(d.jsx)("li",{children:"Adjustable difficulty"}),Object(d.jsx)("li",{children:'"Maybe" state for flagging'})]}),Object(d.jsx)("br",{}),Object(d.jsxs)("p",{children:["Made with \u2764\ufe0f by"," ",Object(d.jsx)("a",{href:"https://www.linkedin.com/in/peter-ty-liu/",target:"_blank",children:"PL"})]})]}),Object(d.jsx)("div",{children:Object(d.jsx)("div",{className:"ms-button",style:{fontSize:"1.3rem"},onClick:function(){i(!1)},children:"Done"})})]})})}t(16);var b=function(){var e=10,n="".concat(e,"x").concat(20,"x").concat(35,"m"),t=Object(i.useState)(!1),c=Object(s.a)(t,2),r=c[0],o=c[1],l=Object(i.useState)(localStorage.getItem("flaggingMode")||"withoutMaybe"),u=Object(s.a)(l,2),b=u[0],h=u[1];function m(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:35,c=[],r=1;r<=t;r++)for(var o=1;o<=n;o++)c.push({c:o,r:r,isMine:!1,id:o+(r-1)*n,swept:!1,flagStatus:"unflagged",minesAround:0});for(var a=i;a>0;){var s=Math.floor(Math.random()*t*n);c[s].isMine||(c[s].isMine=!0,a--)}return c.forEach((function(e){var n=e.r,t=e.c;e.minesAround=[c.find((function(e){return e.r===n&&e.c===t+1})),c.find((function(e){return e.r===n&&e.c===t-1})),c.find((function(e){return e.r===n+1&&e.c===t})),c.find((function(e){return e.r===n-1&&e.c===t})),c.find((function(e){return e.r===n+1&&e.c===t+1})),c.find((function(e){return e.r===n-1&&e.c===t-1})),c.find((function(e){return e.r===n+1&&e.c===t-1})),c.find((function(e){return e.r===n-1&&e.c===t+1}))].filter((function(e){return null===e||void 0===e?void 0:e.isMine})).length})),c}function p(e,n){var t=e.r,i=e.c,c=[n.find((function(e){return e.r===t&&e.c===i+1})),n.find((function(e){return e.r===t&&e.c===i-1})),n.find((function(e){return e.r===t+1&&e.c===i})),n.find((function(e){return e.r===t-1&&e.c===i})),n.find((function(e){return e.r===t+1&&e.c===i+1})),n.find((function(e){return e.r===t-1&&e.c===i-1})),n.find((function(e){return e.r===t+1&&e.c===i-1})),n.find((function(e){return e.r===t-1&&e.c===i+1}))].filter((function(e){return(null===e||void 0===e?void 0:e.id)&&!(null===e||void 0===e?void 0:e.swept)}));c.forEach((function(e){e&&"unflagged"===e.flagStatus&&(n[e.id-1].swept=!0),0===(null===e||void 0===e?void 0:e.minesAround)&&c.length>0&&p(e,n)}))}var v=m(),O=Object(i.useState)(165),x=Object(s.a)(O,2),w=x[0],S=x[1],M=Object(i.useState)("preGame"),k=Object(s.a)(M,2),y=k[0],G=k[1],N=Object(i.useState)(v),A=Object(s.a)(N,2),C=A[0],I=A[1],F=Object(i.useState)(localStorage.getItem(n)?"\ud83c\udfc6 ".concat(localStorage.getItem(n)+"s"):"\ud83c\udfc6 none"),W=Object(s.a)(F,2),E=W[0],R=W[1];Object(i.useEffect)((function(){0===w&&T()}),[w]);var T=function(){G("wonGame")},B=function(e){var n;G("lostGame"),null===(n=document.querySelector(".id-".concat(e)))||void 0===n||n.setAttribute("style","background: red");for(var t=Object(a.a)(C),i=0;i<t.length;i++)t[i].isMine&&(t[i].swept=!0);I(t)},P=function(){I(v),S(165),G("preGame"),R(localStorage.getItem(n)?"\ud83c\udfc6 ".concat(localStorage.getItem(n)+"s"):"\ud83c\udfc6 none")},D=v.map((function(n,t){return 1===n.c?Object(d.jsx)("div",{onContextMenu:function(e){e.preventDefault()},children:C.map((function(n){return n.r===t/e+1?Object(d.jsx)("div",{className:"tile pre-game",onClick:function(){!function(e){for(var n=m();n[e-1].isMine||0!==n[e-1].minesAround;)n=m();n[e-1].swept=!0,p(n[e-1],n),S(n.filter((function(e){return!e.swept&&!e.isMine})).length),I(n),G("inGame")}(n.id)}},"pg-r".concat(n.r,"c").concat(n.c)):null}))},"pg-".concat(t)):null})),L=C.map((function(n,t){return 1===n.c?Object(d.jsx)("div",{children:C.map((function(n){return n.r===t/e+1?Object(d.jsx)(f,{minesAround:n.minesAround,isMine:n.isMine,setTilesRemaining:S,tilesRemaining:w,swept:n.swept,c:n.c,r:n.r,boardState:C,setBoardState:I,floodFill:p,id:n.id,loseGame:B,gameStatus:y,flagStatus:n.flagStatus,flaggingMode:b},"r".concat(n.r,"c").concat(n.c)):null}))},t):null}));return Object(d.jsxs)("div",{className:"App",children:[r&&Object(d.jsx)(j,{flaggingMode:b,setFlaggingMode:h,setSettingsPanelVisible:o}),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsxs)("div",{className:"controls",children:[Object(d.jsx)("span",{children:E}),"wonGame"===y&&Object(d.jsx)("div",{className:"ms-button",onClick:P,children:"\ud83d\ude0e"}),"lostGame"===y&&Object(d.jsx)("div",{className:"ms-button",onClick:P,children:"\ud83d\ude2c"}),"preGame"===y&&Object(d.jsx)("div",{className:"ms-button",onClick:function(){o(!0)},children:"\u2699\ufe0f"}),Object(d.jsx)("span",{style:{textAlign:"right"},children:Object(d.jsx)(g,{gameStatus:y,setMessage:R,currentFormat:n})})]}),Object(d.jsx)("div",{className:"board ".concat(("lostGame"===y||"wonGame"===y)&&"postGame"),children:"preGame"===y?D:L})]})]})},h=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function m(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(b,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/minesweeper",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/minesweeper","/service-worker.js");h?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var i=t.headers.get("content-type");404===t.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):m(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):m(n,e)}))}}()}},[[17,1,2]]]);
//# sourceMappingURL=main.bd46ceda.chunk.js.map