(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{14:function(e,n,t){},16:function(e,n,t){},17:function(e,n,t){"use strict";t.r(n);var i=t(1),r=t.n(i),c=t(8),o=t.n(c),a=(t(14),t(4)),s=t(2),l=t(7),u=t(9),f=t(0);function d(e){var n=e.isMine,t=e.minesAround,i=e.swept,r=e.setTilesRemaining,c=e.tilesRemaining,o=e.floodFill,s=e.boardState,d=e.setBoardState,g=e.id,m=e.flagStatus,j=e.loseGame,h=e.gameStatus,v=function(){if(!i){var e=Object(a.a)(s);e[g-1].flagStatus="flagged"==m?"unflagged":"flagged",d(e)}},b=Object(u.useSwipeable)({onSwiped:function(){return v()}}),p=Object(f.jsxs)(f.Fragment,{children:[(!i&&"inGame"==h||i&&n)&&"flagged"==m?Object(f.jsx)("p",{style:{fontWeight:"normal"},className:m,children:"\ud83d\udea9"}):null,"inGame"===h||n||"flagged"!=m?null:Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{style:{fontWeight:"normal"},className:m,children:"\ud83d\udea9"}),Object(f.jsx)("span",{style:{position:"absolute",color:"white",fontSize:"2.2rem",paddingBottom:"2px"},children:"\ud83d\udec7"})]}),i||"maybe"!=m?null:Object(f.jsx)("p",{children:"\u2754"}),"inGame"==h?!n&&t&&i?Object(f.jsx)("p",{children:t}):null:n?"flagged"!==m?"wonGame"==h?Object(f.jsx)("p",{children:"\ud83c\udf3c"}):Object(f.jsx)("p",{children:"\ud83d\udca3"}):null:t&&i?Object(f.jsx)("p",{children:t}):null]});return Object(f.jsx)("div",Object(l.a)(Object(l.a)({},b),{},{className:"tile id-".concat(g," ").concat(n?"mine":""," ").concat(i?"swept":""," around-").concat(t),onContextMenu:function(e){e.preventDefault(),v()},onClick:function(){if("unflagged"==m&&n&&"inGame"==h)return j(g);if("unflagged"==m&&!i&&"inGame"==h){var e=Object(a.a)(s);e[g-1].swept=!0,r(c-1),0!=t||n||(o(e[g-1],e),r(e.filter((function(e){return!e.swept&&!e.isMine})).length)),d(e)}},children:p}))}function g(e){var n=e.gameStatus,t=e.currentFormat,r=e.setMessage,c=Object(i.useState)(0),o=Object(s.a)(c,2),a=o[0],l=o[1];return Object(i.useEffect)((function(){if("inGame"==n){var e=setInterval((function(){l(Number((a+.1).toFixed(1)))}),100);return function(){return clearInterval(e)}}}),[n,a]),Object(i.useEffect)((function(){if(console.log("The game status is ".concat(n)),"wonGame"==n){var e=localStorage.getItem(t);(!e||a<Number(e))&&(localStorage.setItem(t,a.toString()),r("\ud83c\udf89 New record!"),console.log("New record: ".concat(a,"s")))}"preGame"==n&&l(0)}),[n]),Object(f.jsxs)(f.Fragment,{children:[a.toString().includes(".")?a:a.toString()+".0","s"]})}t(16);var m=function(){var e=10,n="".concat(e,"x").concat(20,"x").concat(35,"m");function t(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:35,r=[],c=1;c<=t;c++)for(var o=1;o<=n;o++)r.push({c:o,r:c,isMine:!1,id:o+(c-1)*n,swept:!1,flagStatus:"unflagged",minesAround:0});for(var a=i;a>0;){var s=Math.floor(Math.random()*t*n);r[s].isMine||(r[s].isMine=!0,a--)}return r.forEach((function(e){var n=e.r,t=e.c;e.minesAround=[r.find((function(e){return e.r==n&&e.c==t+1})),r.find((function(e){return e.r==n&&e.c==t-1})),r.find((function(e){return e.r==n+1&&e.c==t})),r.find((function(e){return e.r==n-1&&e.c==t})),r.find((function(e){return e.r==n+1&&e.c==t+1})),r.find((function(e){return e.r==n-1&&e.c==t-1})),r.find((function(e){return e.r==n+1&&e.c==t-1})),r.find((function(e){return e.r==n-1&&e.c==t+1}))].filter((function(e){return null===e||void 0===e?void 0:e.isMine})).length})),r}function r(e,n){var t=e.r,i=e.c,c=[n.find((function(e){return e.r==t&&e.c==i+1})),n.find((function(e){return e.r==t&&e.c==i-1})),n.find((function(e){return e.r==t+1&&e.c==i})),n.find((function(e){return e.r==t-1&&e.c==i})),n.find((function(e){return e.r==t+1&&e.c==i+1})),n.find((function(e){return e.r==t-1&&e.c==i-1})),n.find((function(e){return e.r==t+1&&e.c==i-1})),n.find((function(e){return e.r==t-1&&e.c==i+1}))].filter((function(e){return(null===e||void 0===e?void 0:e.id)&&!(null===e||void 0===e?void 0:e.swept)}));c.forEach((function(e){e&&(n[e.id-1].swept=!0),0==(null===e||void 0===e?void 0:e.minesAround)&&c.length>0&&r(e,n)}))}var c=t(),o=Object(i.useState)(165),l=Object(s.a)(o,2),u=l[0],m=l[1],j=Object(i.useState)("preGame"),h=Object(s.a)(j,2),v=h[0],b=h[1],p=Object(i.useState)(c),w=Object(s.a)(p,2),O=w[0],x=w[1],S=Object(i.useState)(localStorage.getItem(n)?"\ud83c\udfc6 ".concat(localStorage.getItem(n)+"s"):"\ud83c\udfc6 none"),G=Object(s.a)(S,2),k=G[0],M=G[1];Object(i.useEffect)((function(){0==u&&y()}),[u]);var y=function(){b("wonGame")},N=function(e){var n;b("lostGame"),null===(n=document.querySelector(".id-".concat(e)))||void 0===n||n.setAttribute("style","background: red");for(var t=Object(a.a)(O),i=0;i<t.length;i++)t[i].isMine&&(t[i].swept=!0);x(t)},A=function(){x(c),m(165),b("preGame"),M(localStorage.getItem(n)?"\ud83c\udfc6 ".concat(localStorage.getItem(n)+"s"):"\ud83c\udfc6 none")},C=c.map((function(n,i){if(1==n.c)return Object(f.jsx)("div",{onContextMenu:function(e){e.preventDefault()},children:O.map((function(n){if(n.r==i/e+1)return Object(f.jsx)("div",{className:"tile pre-game",onClick:function(){!function(e){for(var n=t();n[e-1].isMine||0!=n[e-1].minesAround;)n=t();n[e-1].swept=!0,r(n[e-1],n),m(n.filter((function(e){return!e.swept&&!e.isMine})).length),x(n),b("inGame")}(n.id)}},"pg-r".concat(n.r,"c").concat(n.c))}))},"pg-".concat(i))})),W=O.map((function(n,t){if(1==n.c)return Object(f.jsx)("div",{children:O.map((function(n){if(n.r==t/e+1)return Object(f.jsx)(d,{minesAround:n.minesAround,isMine:n.isMine,setTilesRemaining:m,tilesRemaining:u,swept:n.swept,c:n.c,r:n.r,boardState:O,setBoardState:x,floodFill:r,id:n.id,loseGame:N,gameStatus:v,flagStatus:n.flagStatus},"r".concat(n.r,"c").concat(n.c))}))},t)}));return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsxs)("div",{className:"controls",children:[Object(f.jsx)("span",{children:k}),"wonGame"==v&&Object(f.jsx)("div",{onClick:A,children:"\ud83d\ude0e"}),"lostGame"==v&&Object(f.jsx)("div",{onClick:A,children:"\ud83d\ude2c"}),("preGame"==v||"inGame"==v)&&Object(f.jsx)("div",{onClick:function(){alert('New in version 1.2:\n  \u2022 Right-click or swipe a tile to flag it!\n\n  Coming soon:\n  \u2022 Chording\n  \u2022 Adjustable difficulty\n  \u2022 "Maybe" state for flagging\n  \n  Made with \u2764\ufe0f by PL')},children:"\u2754"}),Object(f.jsx)("span",{style:{textAlign:"right"},children:Object(f.jsx)(g,{gameStatus:v,setMessage:M,currentFormat:n})})]}),Object(f.jsx)("div",{className:"board ".concat(("lostGame"==v||"wonGame"==v)&&"postGame"),children:"preGame"==v?C:W})]})})},j=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function h(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(m,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/minesweeper",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/minesweeper","/service-worker.js");j?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var i=t.headers.get("content-type");404===t.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):h(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):h(n,e)}))}}()}},[[17,1,2]]]);
//# sourceMappingURL=main.2906e475.chunk.js.map