(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{12:function(n,e,t){},14:function(n,e,t){},15:function(n,e,t){"use strict";t.r(e);var i=t(1),r=t.n(i),c=t(7),o=t.n(c),a=(t(12),t(5)),s=t(2),u=t(0);function l(n){var e=n.isMine,t=n.minesAround,i=n.swept,r=n.setTilesRemaining,c=n.tilesRemaining,o=n.floodFill,s=n.boardState,l=n.setBoardState,f=n.id,d=n.loseGame,m=n.gameStatus;return Object(u.jsx)("div",{className:"tile id-".concat(f," ").concat(e?"mine":""," ").concat(i?"swept":""," around-").concat(t),onClick:function(){if(e&&"inGame"==m)return d(f);if(!i&&"inGame"==m){var n=Object(a.a)(s);n[f-1].swept=!0,r(c-1),0!=t||e||(o(n[f-1],n),r(n.filter((function(n){return!n.swept&&!n.isMine})).length)),l(n)}},children:i||"inGame"!=m?Object(u.jsxs)("p",{children:[e?c?"\ud83d\udca3":"\ud83c\udf3c":null,!e&&t&&i?t:null]}):null})}t(14);var f=function(){var n=10,e="".concat(n,"x").concat(20,"x").concat(35,"m");function t(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:35,r=[],c=1;c<=t;c++)for(var o=1;o<=e;o++)r.push({c:o,r:c,isMine:!1,id:o+(c-1)*e,swept:!1});for(var a=i;a>0;){var s=Math.floor(Math.random()*t*e);r[s].isMine||(r[s].isMine=!0,a--)}return r.forEach((function(n){var e=n.r,t=n.c;n.minesAround=[r.find((function(n){return n.r==e&&n.c==t+1})),r.find((function(n){return n.r==e&&n.c==t-1})),r.find((function(n){return n.r==e+1&&n.c==t})),r.find((function(n){return n.r==e-1&&n.c==t})),r.find((function(n){return n.r==e+1&&n.c==t+1})),r.find((function(n){return n.r==e-1&&n.c==t-1})),r.find((function(n){return n.r==e+1&&n.c==t-1})),r.find((function(n){return n.r==e-1&&n.c==t+1}))].filter((function(n){return null===n||void 0===n?void 0:n.isMine})).length})),r}function r(n,e){var t=n.r,i=n.c,c=[e.find((function(n){return n.r==t&&n.c==i+1})),e.find((function(n){return n.r==t&&n.c==i-1})),e.find((function(n){return n.r==t+1&&n.c==i})),e.find((function(n){return n.r==t-1&&n.c==i})),e.find((function(n){return n.r==t+1&&n.c==i+1})),e.find((function(n){return n.r==t-1&&n.c==i-1})),e.find((function(n){return n.r==t+1&&n.c==i-1})),e.find((function(n){return n.r==t-1&&n.c==i+1}))].filter((function(n){return(null===n||void 0===n?void 0:n.id)&&!(null===n||void 0===n?void 0:n.swept)}));c.forEach((function(n){e[n.id-1].swept=!0,0==n.minesAround&&c.length>0&&r(n,e)}))}var c=t(),o=Object(i.useState)(165),f=Object(s.a)(o,2),d=f[0],m=f[1],v=Object(i.useState)("preGame"),g=Object(s.a)(v,2),p=g[0],h=g[1],j=Object(i.useState)(0),b=Object(s.a)(j,2),w=b[0],O=b[1],S=Object(i.useState)(c),x=Object(s.a)(S,2),k=x[0],G=x[1],M=Object(i.useState)(localStorage.getItem(e)?"\ud83c\udfc6 ".concat(localStorage.getItem(e)+"s"):"\ud83c\udfc6 none"),A=Object(s.a)(M,2),N=A[0],I=A[1];Object(i.useEffect)((function(){if("inGame"==p){var n=setInterval((function(){O(Number((w+.1).toFixed(1)))}),100);return function(){return clearInterval(n)}}}),[p,w]),Object(i.useEffect)((function(){0==d&&y()}),[d]);var y=function(){h("postGame");var n=localStorage.getItem(e);(!n||w<n)&&(localStorage.setItem(e,w),I("\ud83c\udf89 New record!"))},W=function(n){h("postGame"),document.querySelector(".id-".concat(n)).setAttribute("style","background: red"),navigator.vibrate(200);for(var e=Object(a.a)(k),t=0;t<e.length;t++)e[t].isMine&&(e[t].swept=!0);G(e)},E=c.map((function(e,i){if(1==e.c)return Object(u.jsx)("div",{children:k.map((function(e){if(e.r==i/n+1)return Object(u.jsx)("div",{className:"tile pre-game",onClick:function(){!function(n){for(var e=t();e[n-1].isMine||0!=e[n-1].minesAround;)e=t();e[n-1].swept=!0,r(e[n-1],e),m(e.filter((function(n){return!n.swept&&!n.isMine})).length),G(e),O(0),h("inGame")}(e.id)}},"pg-r".concat(e.r,"c").concat(e.c))}))},"pg-".concat(i))})),R=k.map((function(e,t){if(1==e.c)return Object(u.jsx)("div",{children:k.map((function(e){if(e.r==t/n+1)return Object(u.jsx)(l,{minesAround:e.minesAround,isMine:e.isMine,setTilesRemaining:m,tilesRemaining:d,swept:e.swept,c:e.c,r:e.r,boardState:k,setBoardState:G,floodFill:r,id:e.id,loseGame:W,gameStatus:p},"r".concat(e.r,"c").concat(e.c))}))},t)}));return Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)("div",{className:"container",children:[Object(u.jsxs)("div",{className:"controls",children:[Object(u.jsx)("span",{children:N}),"postGame"==p&&Object(u.jsx)("div",{onClick:function(){G(c),m(165),O(0),h("preGame"),I(localStorage.getItem(e)?"\ud83c\udfc6 ".concat(localStorage.getItem(e)+"s"):"\ud83c\udfc6 none")},children:0==d?"\ud83d\ude0e":"\ud83d\ude2c"}),Object(u.jsxs)("span",{style:{textAlign:"right"},children:[w.toString().includes(".")?w:w.toString()+".0","s"]})]}),Object(u.jsx)("div",{className:"board ".concat("postGame"==p&&"postGame"),children:"preGame"==p?E:R})]})})},d=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function m(n,e){navigator.serviceWorker.register(n).then((function(n){n.onupdatefound=function(){var t=n.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),e&&e.onUpdate&&e.onUpdate(n)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(n)))})}})).catch((function(n){console.error("Error during service worker registration:",n)}))}o.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(f,{})}),document.getElementById("root")),function(n){if("serviceWorker"in navigator){if(new URL("/minesweeper",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/minesweeper","/service-worker.js");d?(!function(n,e){fetch(n,{headers:{"Service-Worker":"script"}}).then((function(t){var i=t.headers.get("content-type");404===t.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(n){n.unregister().then((function(){window.location.reload()}))})):m(n,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,n),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):m(e,n)}))}}()}},[[15,1,2]]]);
//# sourceMappingURL=main.2ce270a2.chunk.js.map