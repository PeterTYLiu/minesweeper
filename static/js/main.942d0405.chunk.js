(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{12:function(e,n,t){},14:function(e,n,t){},15:function(e,n,t){"use strict";t.r(n);var r=t(1),i=t.n(r),c=t(7),o=t.n(c),a=(t(12),t(5)),s=t(2),u=t(0);function l(e){var n=e.isMine,t=e.minesAround,r=e.swept,i=e.setTilesRemaining,c=e.tilesRemaining,o=e.floodFill,s=e.boardState,l=e.setBoardState,f=e.id,d=e.loseGame,m=e.gameStatus;return Object(u.jsx)("div",{className:"tile id-".concat(f," ").concat(n?"mine":""," ").concat(r?"swept":""," around-").concat(t),onClick:function(){if(n&&"inGame"==m)return d(f);if(!r&&"inGame"==m){var e=Object(a.a)(s);e[f-1].swept=!0,i(c-1),0!=t||n||(o(e[f-1],e),i(e.filter((function(e){return!e.swept&&!e.isMine})).length)),l(e)}},children:r||"inGame"!=m?Object(u.jsxs)("p",{children:[n?c?"\ud83d\udca3":"\ud83c\udf3c":null,!n&&t&&r?t:null]}):null})}function f(e){var n=e.gameStatus,t=e.currentFormat,i=e.setMessage,c=Object(r.useState)(0),o=Object(s.a)(c,2),a=o[0],l=o[1];return Object(r.useEffect)((function(){if("inGame"==n){var e=setInterval((function(){l(Number((a+.1).toFixed(1)))}),100);return function(){return clearInterval(e)}}}),[n,a]),Object(r.useEffect)((function(){if(console.log("The game status is ".concat(n)),"wonGame"==n){var e=localStorage.getItem(t);(!e||a<Number(e))&&(localStorage.setItem(t,a.toString()),i("\ud83c\udf89 New record!"),console.log("New record: ".concat(a,"s")))}"preGame"==n&&l(0)}),[n]),Object(u.jsxs)(u.Fragment,{children:[a.toString().includes(".")?a:a.toString()+".0","s"]})}t(14);var d=function(){var e=10,n="".concat(e,"x").concat(20,"x").concat(35,"m");function t(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:35,i=[],c=1;c<=t;c++)for(var o=1;o<=n;o++)i.push({c:o,r:c,isMine:!1,id:o+(c-1)*n,swept:!1});for(var a=r;a>0;){var s=Math.floor(Math.random()*t*n);i[s].isMine||(i[s].isMine=!0,a--)}return i.forEach((function(e){var n=e.r,t=e.c;e.minesAround=[i.find((function(e){return e.r==n&&e.c==t+1})),i.find((function(e){return e.r==n&&e.c==t-1})),i.find((function(e){return e.r==n+1&&e.c==t})),i.find((function(e){return e.r==n-1&&e.c==t})),i.find((function(e){return e.r==n+1&&e.c==t+1})),i.find((function(e){return e.r==n-1&&e.c==t-1})),i.find((function(e){return e.r==n+1&&e.c==t-1})),i.find((function(e){return e.r==n-1&&e.c==t+1}))].filter((function(e){return null===e||void 0===e?void 0:e.isMine})).length})),i}function i(e,n){var t=e.r,r=e.c,c=[n.find((function(e){return e.r==t&&e.c==r+1})),n.find((function(e){return e.r==t&&e.c==r-1})),n.find((function(e){return e.r==t+1&&e.c==r})),n.find((function(e){return e.r==t-1&&e.c==r})),n.find((function(e){return e.r==t+1&&e.c==r+1})),n.find((function(e){return e.r==t-1&&e.c==r-1})),n.find((function(e){return e.r==t+1&&e.c==r-1})),n.find((function(e){return e.r==t-1&&e.c==r+1}))].filter((function(e){return(null===e||void 0===e?void 0:e.id)&&!(null===e||void 0===e?void 0:e.swept)}));c.forEach((function(e){n[e.id-1].swept=!0,0==e.minesAround&&c.length>0&&i(e,n)}))}var c=t(),o=Object(r.useState)(165),d=Object(s.a)(o,2),m=d[0],g=d[1],v=Object(r.useState)("preGame"),h=Object(s.a)(v,2),p=h[0],j=h[1],b=Object(r.useState)(c),w=Object(s.a)(b,2),O=w[0],S=w[1],x=Object(r.useState)(localStorage.getItem(n)?"\ud83c\udfc6 ".concat(localStorage.getItem(n)+"s"):"\ud83c\udfc6 none"),G=Object(s.a)(x,2),k=G[0],M=G[1];Object(r.useEffect)((function(){0==m&&A()}),[m]);var A=function(){j("wonGame")},N=function(e){j("lostGame"),document.querySelector(".id-".concat(e)).setAttribute("style","background: red");for(var n=Object(a.a)(O),t=0;t<n.length;t++)n[t].isMine&&(n[t].swept=!0);S(n)},y=function(){S(c),g(165),j("preGame"),M(localStorage.getItem(n)?"\ud83c\udfc6 ".concat(localStorage.getItem(n)+"s"):"\ud83c\udfc6 none")},I=c.map((function(n,r){if(1==n.c)return Object(u.jsx)("div",{children:O.map((function(n){if(n.r==r/e+1)return Object(u.jsx)("div",{className:"tile pre-game",onClick:function(){!function(e){for(var n=t();n[e-1].isMine||0!=n[e-1].minesAround;)n=t();n[e-1].swept=!0,i(n[e-1],n),g(n.filter((function(e){return!e.swept&&!e.isMine})).length),S(n),j("inGame")}(n.id)}},"pg-r".concat(n.r,"c").concat(n.c))}))},"pg-".concat(r))})),E=O.map((function(n,t){if(1==n.c)return Object(u.jsx)("div",{children:O.map((function(n){if(n.r==t/e+1)return Object(u.jsx)(l,{minesAround:n.minesAround,isMine:n.isMine,setTilesRemaining:g,tilesRemaining:m,swept:n.swept,c:n.c,r:n.r,boardState:O,setBoardState:S,floodFill:i,id:n.id,loseGame:N,gameStatus:p},"r".concat(n.r,"c").concat(n.c))}))},t)}));return Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)("div",{className:"container",children:[Object(u.jsxs)("div",{className:"controls",children:[Object(u.jsx)("span",{children:k}),"wonGame"==p&&Object(u.jsx)("div",{onClick:y,children:"\ud83d\ude0e"}),"lostGame"==p&&Object(u.jsx)("div",{onClick:y,children:"\ud83d\ude2c"}),("preGame"==p||"inGame"==p)&&Object(u.jsx)("span",{style:{width:"60px",opacity:"0.7",textAlign:"center",color:"black"},children:"v1.1.1"}),Object(u.jsx)("span",{style:{textAlign:"right"},children:Object(u.jsx)(f,{gameStatus:p,setMessage:M,currentFormat:n})})]}),Object(u.jsx)("div",{className:"board ".concat(("lostGame"==p||"wonGame"==p)&&"postGame"),children:"preGame"==p?I:E})]})})},m=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function g(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(d,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/minesweeper",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/minesweeper","/service-worker.js");m?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):g(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):g(n,e)}))}}()}},[[15,1,2]]]);
//# sourceMappingURL=main.942d0405.chunk.js.map