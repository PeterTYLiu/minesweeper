(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{16:function(e,n,t){},19:function(e,n,t){},20:function(e,n,t){},21:function(e,n,t){"use strict";t.r(n);var c=t(1),i=t.n(c),o=t(9),a=t.n(o),r=(t(16),t(4)),s=t(2),l=t(8),u=t(10),d=t(0);function f(e){var n=e.isMine,t=e.minesAround,c=e.swept,i=e.setTilesRemaining,o=e.tilesRemaining,a=e.floodFill,s=e.boardState,f=e.setBoardState,g=e.id,j=e.flagStatus,m=e.loseGame,h=e.gameStatus,b=e.flaggingMode,p=function(){if(!c&&"withoutMaybe"===b){var e=Object(r.a)(s);e[g-1].flagStatus="flagged"===j?"unflagged":"flagged",f(e)}},x=Object(u.useSwipeable)({onSwiped:function(){p()}}),O=Object(d.jsxs)(d.Fragment,{children:[(!c&&"inGame"===h||c&&n)&&"flagged"===j?Object(d.jsx)("p",{style:{fontWeight:"normal"},className:j,children:"\ud83d\udea9"}):null,"inGame"===h||n||"flagged"!==j?null:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{style:{fontWeight:"normal"},className:j,children:"\ud83d\udea9"}),Object(d.jsx)("span",{style:{position:"absolute",color:"white",fontSize:"2.2rem",paddingBottom:"2px"},children:"\ud83d\udec7"})]}),c||"maybe"!==j?null:Object(d.jsx)("p",{children:"\u2754"}),"inGame"===h?!n&&t&&c?Object(d.jsx)("p",{children:t}):null:n?"flagged"!==j?"wonGame"===h?Object(d.jsx)("p",{children:"\ud83c\udf3c"}):Object(d.jsx)("p",{children:"\ud83d\udca3"}):"wonGame"===h?Object(d.jsx)("p",{children:"\ud83c\udf3c"}):null:t&&c?Object(d.jsx)("p",{children:t}):null]});return Object(d.jsx)("div",Object(l.a)(Object(l.a)({},x),{},{className:"tile id-".concat(g," ").concat(n?"mine":""," ").concat(c?"swept":""," around-").concat(t),onContextMenu:function(e){e.preventDefault(),p()},onClick:function(){if("unflagged"===j&&n&&"inGame"===h)return m(g);if("unflagged"===j&&!c&&"inGame"===h){var e=Object(r.a)(s);e[g-1].swept=!0,i(o-1),0!==t||n||(a(e[g-1],e),i(e.filter((function(e){return!e.swept&&!e.isMine})).length)),f(e)}},children:O}))}function g(e){var n=e.gameStatus,t=e.currentFormat,i=e.setMessage,o=Object(c.useState)(0),a=Object(s.a)(o,2),r=a[0],l=a[1];return Object(c.useEffect)((function(){if("inGame"===n){var e=setInterval((function(){l(Number((r+.1).toFixed(1)))}),100);return function(){return clearInterval(e)}}}),[n,r]),Object(c.useEffect)((function(){if(console.log("The game status is ".concat(n)),"wonGame"===n){var e=localStorage.getItem(t);(!e||r<Number(e))&&(localStorage.setItem(t,r.toString()),i("\ud83c\udf89 New record!"),console.log("New record: ".concat(r,"s")))}"preGame"===n&&l(0)}),[n]),Object(d.jsxs)(d.Fragment,{children:[r.toString().includes(".")?r:r.toString()+".0","s"]})}var j=t(7),m=t.n(j),h=t(11);t(19);function b(e){var n=e.flaggingMode,t=e.setFlaggingMode,c=e.setSettingsPanelVisible,i=e.setNumOfMines,o=e.numOfMines,a=!0;return Object(h.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.getInstalledRelatedApps();case 2:return n=e.sent,e.next=5,n.length;case 5:if(!e.sent){e.next=7;break}a=!1;case 7:case"end":return e.stop()}}),e)})))(),Object(d.jsx)("div",{style:{position:"absolute",height:"100vh",width:"100vw",backgroundColor:"#00000088",display:"grid",placeItems:"center"},onClick:function(){c(!1)},children:Object(d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"20px",background:"white",maxWidth:"350px",width:"90%",borderRadius:"4px",padding:"24px"},className:"settings-panel",onClick:function(e){e.stopPropagation()},children:[Object(d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",verticalAlign:"baseline"},children:[Object(d.jsx)("h2",{children:"Settings"}),Object(d.jsx)("h2",{style:{opacity:"0.4",cursor:"pointer"},onClick:function(){c(!1)},children:"\u2716\ufe0f"})]}),Object(d.jsx)("hr",{}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"difficulty-selector",children:[Object(d.jsxs)("div",{className:20===o?"selected":void 0,onClick:function(){i(20),localStorage.setItem("numOfMines","20")},children:[Object(d.jsx)("h3",{children:"Easy"}),Object(d.jsx)("p",{children:"20 mines"})]}),Object(d.jsxs)("div",{className:35===o?"selected":void 0,onClick:function(){i(35),localStorage.setItem("numOfMines","35")},children:[Object(d.jsx)("h3",{children:"Medium"}),Object(d.jsx)("p",{children:"35 mines"})]}),Object(d.jsxs)("div",{className:50===o?"selected":void 0,onClick:function(){i(50),localStorage.setItem("numOfMines","50")},children:[Object(d.jsx)("h3",{children:"Hard"}),Object(d.jsx)("p",{children:"50 mines"})]})]}),Object(d.jsxs)("p",{children:["Best time on ",50===o&&"hard",35===o&&"medium",20===o&&"easy",":"," ",localStorage.getItem("10x20x".concat(o,"m"))?"\ud83c\udfc6 "+localStorage.getItem("10x20x".concat(o,"m"))+"s":"none"]})]}),Object(d.jsx)("hr",{}),Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"checkbox",checked:"off"!==n,onChange:function(){var e="off"===n?"withoutMaybe":"off";t(e),localStorage.setItem("flaggingMode",e)}}),Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:"Flagging"}),Object(d.jsx)("p",{children:"Swipe or right-click a tile to flag it"})]})]}),Object(d.jsx)("hr",{}),a?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("p",{children:["This is a"," ",Object(d.jsx)("a",{href:"https://mobilesyrup.com/2020/05/24/how-install-progressive-web-app-pwa-android-ios-pc-mac/",target:"_blank",children:"progressive web app"}),". For the best minesweeping experience and offline play, install this app on your device."]}),Object(d.jsx)("hr",{})]}):null,Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{children:["Made with \u2764\ufe0f by"," ",Object(d.jsx)("a",{href:"https://www.linkedin.com/in/peter-ty-liu/",target:"_blank",children:"PL"})]}),Object(d.jsxs)("p",{style:{fontSize:"14px",marginTop:"14px"},children:["Enjoying the game?"," ",Object(d.jsx)("a",{href:"",onClick:function(e){e.preventDefault(),navigator.clipboard.writeText("3AncbaTiG8qT7Lq2XhoXYGzMB4mpsGUCJ6"),alert("Bitcoin address copied to clipboard")},children:"Buy me a cup of coffee"})," ",":)"]}),Object(d.jsx)("p",{style:{fontSize:"14px",opacity:"0.5",marginTop:"14px"},children:"v1.4.3 (28/11/2021)"})]})]})})}t(20);var p=function(){var e=20,n=10,t=Object(c.useState)(!1),i=Object(s.a)(t,2),o=i[0],a=i[1],l=Object(c.useState)(localStorage.getItem("numOfMines")?Number(localStorage.getItem("numOfMines")):35),u=Object(s.a)(l,2),j=u[0],m=u[1],h=Object(c.useState)(localStorage.getItem("flaggingMode")||"withoutMaybe"),p=Object(s.a)(h,2),x=p[0],O=p[1],v=200-j;function w(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j,o=[],a=1;a<=c;a++)for(var r=1;r<=t;r++)o.push({c:r,r:a,isMine:!1,id:r+(a-1)*t,swept:!1,flagStatus:"unflagged",minesAround:0});for(var s=i;s>0;){var l=Math.floor(Math.random()*c*t);o[l].isMine||(o[l].isMine=!0,s--)}return o.forEach((function(e){var n=e.r,t=e.c;e.minesAround=[o.find((function(e){return e.r===n&&e.c===t+1})),o.find((function(e){return e.r===n&&e.c===t-1})),o.find((function(e){return e.r===n+1&&e.c===t})),o.find((function(e){return e.r===n-1&&e.c===t})),o.find((function(e){return e.r===n+1&&e.c===t+1})),o.find((function(e){return e.r===n-1&&e.c===t-1})),o.find((function(e){return e.r===n+1&&e.c===t-1})),o.find((function(e){return e.r===n-1&&e.c===t+1}))].filter((function(e){return null===e||void 0===e?void 0:e.isMine})).length})),o}function S(e,n){var t=e.r,c=e.c,i=[n.find((function(e){return e.r===t&&e.c===c+1})),n.find((function(e){return e.r===t&&e.c===c-1})),n.find((function(e){return e.r===t+1&&e.c===c})),n.find((function(e){return e.r===t-1&&e.c===c})),n.find((function(e){return e.r===t+1&&e.c===c+1})),n.find((function(e){return e.r===t-1&&e.c===c-1})),n.find((function(e){return e.r===t+1&&e.c===c-1})),n.find((function(e){return e.r===t-1&&e.c===c+1}))].filter((function(e){return(null===e||void 0===e?void 0:e.id)&&!(null===e||void 0===e?void 0:e.swept)}));i.forEach((function(e){e&&"unflagged"===e.flagStatus&&(n[e.id-1].swept=!0),0===(null===e||void 0===e?void 0:e.minesAround)&&i.length>0&&S(e,n)}))}var M=w(),y=Object(c.useState)(v),k=Object(s.a)(y,2),G=k[0],N=k[1],I=Object(c.useState)("preGame"),C=Object(s.a)(I,2),A=C[0],F=C[1],E=Object(c.useState)(M),T=Object(s.a)(E,2),W=T[0],B=T[1],R=Object(c.useState)(localStorage.getItem("".concat(n,"x").concat(e,"x").concat(j,"m"))?"\ud83c\udfc6 ".concat(localStorage.getItem("".concat(n,"x").concat(e,"x").concat(j,"m"))+"s"):"\ud83c\udfc6 none"),P=Object(s.a)(R,2),z=P[0],D=P[1];Object(c.useEffect)((function(){D(localStorage.getItem("".concat(n,"x").concat(e,"x").concat(j,"m"))?"\ud83c\udfc6 ".concat(localStorage.getItem("".concat(n,"x").concat(e,"x").concat(j,"m"))+"s"):"\ud83c\udfc6 none")}),[j]),Object(c.useEffect)((function(){0===G&&L()}),[G]);var L=function(){F("wonGame")},U=function(e){var n;F("lostGame"),null===(n=document.querySelector(".id-".concat(e)))||void 0===n||n.setAttribute("style","background: red");for(var t=Object(r.a)(W),c=0;c<t.length;c++)t[c].isMine&&(t[c].swept=!0);B(t)},q=function(){B(M),N(v),F("preGame"),D(localStorage.getItem("".concat(n,"x").concat(e,"x").concat(j,"m"))?"\ud83c\udfc6 ".concat(localStorage.getItem("".concat(n,"x").concat(e,"x").concat(j,"m"))+"s"):"\ud83c\udfc6 none")},J=M.map((function(e,t){return 1===e.c?Object(d.jsx)("div",{onContextMenu:function(e){e.preventDefault()},children:W.map((function(e){return e.r===t/n+1?Object(d.jsx)("div",{className:"tile pre-game",onClick:function(){!function(e){for(var n=w();n[e-1].isMine||0!==n[e-1].minesAround;)n=w();n[e-1].swept=!0,S(n[e-1],n),N(n.filter((function(e){return!e.swept&&!e.isMine})).length),B(n),F("inGame")}(e.id)}},"pg-r".concat(e.r,"c").concat(e.c)):null}))},"pg-".concat(t)):null})),V=W.map((function(e,t){return 1===e.c?Object(d.jsx)("div",{children:W.map((function(e){return e.r===t/n+1?Object(d.jsx)(f,{minesAround:e.minesAround,isMine:e.isMine,setTilesRemaining:N,tilesRemaining:G,swept:e.swept,c:e.c,r:e.r,boardState:W,setBoardState:B,floodFill:S,id:e.id,loseGame:U,gameStatus:A,flagStatus:e.flagStatus,flaggingMode:x},"r".concat(e.r,"c").concat(e.c)):null}))},t):null}));return Object(d.jsxs)("div",{className:"App",children:[o&&Object(d.jsx)(b,{flaggingMode:x,setFlaggingMode:O,setSettingsPanelVisible:a,setNumOfMines:m,numOfMines:j}),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsxs)("div",{className:"controls",children:[Object(d.jsx)("span",{children:z}),"wonGame"===A&&Object(d.jsx)("div",{className:"ms-button",onClick:q,children:"\ud83d\ude0e"}),"lostGame"===A&&Object(d.jsx)("div",{className:"ms-button",onClick:q,children:"\ud83d\ude2c"}),"inGame"===A&&Object(d.jsxs)("span",{style:{width:"auto"},children:["\ud83d\udca3"," ",j-W.filter((function(e){return"flagged"==e.flagStatus})).length]}),"preGame"===A&&Object(d.jsx)("div",{className:"ms-button",onClick:function(){a(!0)},children:"\u2699\ufe0f"}),Object(d.jsx)("span",{style:{textAlign:"right"},children:Object(d.jsx)(g,{gameStatus:A,setMessage:D,currentFormat:"".concat(n,"x").concat(e,"x").concat(j,"m")})})]}),Object(d.jsx)("div",{className:"board ".concat(("lostGame"===A||"wonGame"===A)&&"postGame"),children:"preGame"===A?J:V})]})]})},x=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function O(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(p,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/minesweeper",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/minesweeper","/service-worker.js");x?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var c=t.headers.get("content-type");404===t.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):O(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):O(n,e)}))}}()}},[[21,1,2]]]);
//# sourceMappingURL=main.f0dc9263.chunk.js.map